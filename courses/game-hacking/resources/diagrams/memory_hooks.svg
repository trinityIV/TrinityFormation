<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
    <!-- Hooks Mémoire -->
    <style>
        text { font-family: Arial, sans-serif; fill: white; }
        .title { font-size: 24px; font-weight: bold; }
        .subtitle { font-size: 18px; }
        .label { font-size: 14px; }
        .box { fill: #2d2d2d; stroke: #0d6efd; stroke-width: 2; }
        .hook { fill: #1a1a1a; stroke: #ffc107; stroke-width: 2; }
        .code { fill: #1a1a1a; stroke: #28a745; stroke-width: 2; }
        .arrow { stroke: white; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
        .dashed { stroke-dasharray: 5,5; }
    </style>

    <!-- Définition de la flèche -->
    <defs>
        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="white"/>
        </marker>
    </defs>

    <!-- Titre -->
    <text x="400" y="50" class="title" text-anchor="middle">Hooks Mémoire</text>

    <!-- Code Original -->
    <rect x="100" y="100" width="200" height="150" class="code" rx="5"/>
    <text x="200" y="130" class="subtitle" text-anchor="middle">Code Original</text>
    <text x="200" y="160" class="label" text-anchor="middle" font-size="12">0x401000: CALL 0x401100</text>
    <text x="200" y="180" class="label" text-anchor="middle" font-size="12">0x401005: MOV EAX, [ESI]</text>
    <text x="200" y="200" class="label" text-anchor="middle" font-size="12">0x401007: RET</text>

    <!-- Hook -->
    <rect x="500" y="100" width="200" height="150" class="hook" rx="5"/>
    <text x="600" y="130" class="subtitle" text-anchor="middle">Hook</text>
    <text x="600" y="160" class="label" text-anchor="middle" font-size="12">0x402000: PUSH EAX</text>
    <text x="600" y="180" class="label" text-anchor="middle" font-size="12">0x402001: CALL CheckMem</text>
    <text x="600" y="200" class="label" text-anchor="middle" font-size="12">0x402006: JMP 0x401005</text>

    <!-- Flux d'exécution -->
    <rect x="100" y="350" width="600" height="100" class="box" rx="5"/>
    <text x="400" y="380" class="subtitle" text-anchor="middle">Flux d'Exécution</text>
    
    <!-- Points d'exécution -->
    <circle cx="150" cy="420" r="5" fill="white"/>
    <circle cx="300" cy="420" r="5" fill="white"/>
    <circle cx="500" cy="420" r="5" fill="white"/>
    <circle cx="650" cy="420" r="5" fill="white"/>

    <!-- Étiquettes -->
    <text x="150" y="440" class="label" text-anchor="middle" font-size="10">Début</text>
    <text x="300" y="440" class="label" text-anchor="middle" font-size="10">Hook Activé</text>
    <text x="500" y="440" class="label" text-anchor="middle" font-size="10">Vérification</text>
    <text x="650" y="440" class="label" text-anchor="middle" font-size="10">Retour</text>

    <!-- Flèches -->
    <path d="M 300 175 L 500 175" class="arrow"/>
    <path d="M 600 250 L 600 300 L 200 300 L 200 250" class="arrow dashed"/>
    
    <!-- Flèches de flux -->
    <path d="M 155 420 L 295 420" class="arrow"/>
    <path d="M 305 420 L 495 420" class="arrow"/>
    <path d="M 505 420 L 645 420" class="arrow"/>
</svg>
